<workflow>
	<property name="basePath" value="src"/>
	<property name="chronosProfileUri" value="/home/nist/Desktop/yyy/chronos.profile.uml"/>
	<property name="ouranosProfileUri" value="/home/nist/Desktop/yyy/ouranos.profile.uml"/>

	<!-- UML2 Setup -->
	<bean class="org.eclipse.mwe.emf.StandaloneSetup"/>
	<bean class="oaw.uml2.Setup" standardUML2Setup="true"/>

	<!-- load metamodels -->
	<bean id="uml2" class="oaw.uml2.UML2MetaModel"/>
	<bean id="chronos" class="oaw.uml2.profile.ProfileMetaModel">
		<profile value="${chronosProfileUri}"/>
	</bean>
	<bean id="ouranos" class="oaw.uml2.profile.ProfileMetaModel">
		<profile value="${ouranosProfileUri}"/>
	</bean>

	<!-- read source model -->
	<component class="oaw.emf.XmiReader">
		<modelFile value="/home/nist/Desktop/yyy/cwm-export.uml"/>
		<outputSlot value="sourceModel"/>
	 </component>

	<!-- check model -->
	<component class="org.openarchitectureware.check.CheckComponent">
		<metaModel idRef="chronos"/>
		<metaModel idRef="ouranos"/>
		<metaModel idRef="uml2"/>
		<checkFile value="cartridge::Grails::grailsService"/>
		<emfAllChildrenSlot value="sourceModel"/>		
	</component>
	
	<!-- generate domain classes -->
	<component class="org.openarchitectureware.xpand2.Generator">
		<metaModel idRef="chronos"/>
		<metaModel idRef="ouranos"/>
		<metaModel idRef="uml2"/>
		<fileEncoding value="utf-8"/>

		<expand value="cartridge::Grails::grailsService::root FOR sourceModel"/>

		<beautifier class="net.sourceforge.olympos.oaw.workflow.BlankLineRemover"/>

		<prSrcPaths value="target/grails/service"/>	
		<outlet path="target/grails/service"/>
	</component>
</workflow>
