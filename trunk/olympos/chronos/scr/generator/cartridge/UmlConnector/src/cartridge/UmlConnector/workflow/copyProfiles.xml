<?xml version="1.0" encoding="utf-8"?>
<project name="CopyProfiles" default="copyProfiles">

	<!-- set as workflow parameters
		<property name="outputRelativePath" value="${outputRelativePath}"/>
		<property name="chronos.file" value="${basePath}/metamodel/chronos.profile.uml"/>
		<property name="ouranos.file" value="${basePath}/metamodel/ouranos.profile.uml"/>
	-->
	
	<target name="copyProfiles">
		<echo message="outputRelativePath: ${outputRelativePath}"/>
		
		<dirname property="model.dir" file="${outputRelativePath}"/>
		
		<antcall target="doCopy">
			<param name="final.model.dir" value="${model.dir}"/>
		</antcall>
		
		<!--
		<available property="isModelDir" file="${model.dir}" type="dir"/>
		
		<dirname property="model.dir2" file="${model.dir}"/>
		
		<antcall target="upDir">
			<param name="model.dir" value="${model.dir}"/>
		</antcall>
		<antcall target="directCopy">
			<param name="model.dir" value="${model.dir}"/>
		</antcall>
		-->
	</target>
	
	<target name="upDir" unless="${isModelDir}">
		<echo message="model.dir: ${model.dir}"/>
		
		<dirname property="local.model.dir" file="${model.dir}"/>

		<echo message="local.model.dir: ${model.dir}"/>
		
		<antcall target="doCopy">
			<param name="final.model.dir" value="${local.model.dir}"/>
		</antcall>
	</target>

	<target name="directCopy" if="${isModelDir}">
		<echo message="model.dir: ${model.dir}"/>
		
		<antcall target="doCopy">
			<param name="final.model.dir" value="${model.dir}"/>
		</antcall>
	</target>
	
	<target name="doCopy">
		<copy file="${chronos.file}" todir="${final.model.dir}" failonerror="true"/>
		<copy file="${ouranos.file}" todir="${final.model.dir}" failonerror="true"/>
	</target>
</project>
